(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{42640:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,62093,23)),Promise.resolve().then(a.t.bind(a,27735,23)),Promise.resolve().then(a.t.bind(a,30347,23)),Promise.resolve().then(a.bind(a,30210)),Promise.resolve().then(a.bind(a,70449))},21455:function(e){var t;t=function(){"use strict";var e="millisecond",t="second",a="minute",r="hour",s="week",n="month",i="quarter",d="year",o="date",l="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,c=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(e,t,a){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(a)+e},h="en",p={};p[h]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||"th")+"]"}};var m="$isDayjsObject",y=function(e){return e instanceof D||!(!e||!e[m])},g=function e(t,a,r){var s;if(!t)return h;if("string"==typeof t){var n=t.toLowerCase();p[n]&&(s=n),a&&(p[n]=a,s=n);var i=t.split("-");if(!s&&i.length>1)return e(i[0])}else{var d=t.name;p[d]=t,s=d}return!r&&s&&(h=s),s||!r&&h},v=function(e,t){if(y(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new D(a)},S={s:f,z:function(e){var t=-e.utcOffset(),a=Math.abs(t);return(t<=0?"+":"-")+f(Math.floor(a/60),2,"0")+":"+f(a%60,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var r=12*(a.year()-t.year())+(a.month()-t.month()),s=t.clone().add(r,n),i=a-s<0,d=t.clone().add(r+(i?-1:1),n);return+(-(r+(a-s)/(i?s-d:d-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(l){return({M:n,y:d,w:s,d:"day",D:o,h:r,m:a,s:t,ms:e,Q:i})[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};S.l=g,S.i=y,S.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var D=function(){function f(e){this.$L=g(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[m]=!0}var h=f.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(u);if(r){var s=r[2]-1||0,n=(r[7]||"0").substring(0,3);return a?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,n)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,n)}}return new Date(t)}(e),this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return S},h.isValid=function(){return this.$d.toString()!==l},h.isSame=function(e,t){var a=v(e);return this.startOf(t)<=a&&a<=this.endOf(t)},h.isAfter=function(e,t){return v(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<v(e)},h.$g=function(e,t,a){return S.u(e)?this[t]:this.set(a,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,i){var l=this,u=!!S.u(i)||i,c=S.p(e),f=function(e,t){var a=S.w(l.$u?Date.UTC(l.$y,t,e):new Date(l.$y,t,e),l);return u?a:a.endOf("day")},h=function(e,t){return S.w(l.toDate()[e].apply(l.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),l)},p=this.$W,m=this.$M,y=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case d:return u?f(1,0):f(31,11);case n:return u?f(1,m):f(0,m+1);case s:var v=this.$locale().weekStart||0,D=(p<v?p+7:p)-v;return f(u?y-D:y+(6-D),m);case"day":case o:return h(g+"Hours",0);case r:return h(g+"Minutes",1);case a:return h(g+"Seconds",2);case t:return h(g+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(s,i){var l,u=S.p(s),c="set"+(this.$u?"UTC":""),f=((l={}).day=c+"Date",l[o]=c+"Date",l[n]=c+"Month",l[d]=c+"FullYear",l[r]=c+"Hours",l[a]=c+"Minutes",l[t]=c+"Seconds",l[e]=c+"Milliseconds",l)[u],h="day"===u?this.$D+(i-this.$W):i;if(u===n||u===d){var p=this.clone().set(o,1);p.$d[f](h),p.init(),this.$d=p.set(o,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[S.p(e)]()},h.add=function(e,i){var o,l=this;e=Number(e);var u=S.p(i),c=function(t){var a=v(l);return S.w(a.date(a.date()+Math.round(t*e)),l)};if(u===n)return this.set(n,this.$M+e);if(u===d)return this.set(d,this.$y+e);if("day"===u)return c(1);if(u===s)return c(7);var f=((o={})[a]=6e4,o[r]=36e5,o[t]=1e3,o)[u]||1,h=this.$d.getTime()+e*f;return S.w(h,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||l;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=S.z(this),n=this.$H,i=this.$m,d=this.$M,o=a.weekdays,u=a.months,f=a.meridiem,h=function(e,a,s,n){return e&&(e[a]||e(t,r))||s[a].slice(0,n)},p=function(e){return S.s(n%12||12,e,"0")},m=f||function(e,t,a){var r=e<12?"AM":"PM";return a?r.toLowerCase():r};return r.replace(c,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return d+1;case"MM":return S.s(d+1,2,"0");case"MMM":return h(a.monthsShort,d,u,3);case"MMMM":return h(u,d);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(a.weekdaysMin,t.$W,o,2);case"ddd":return h(a.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(n);case"HH":return S.s(n,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return m(n,i,!0);case"A":return m(n,i,!1);case"m":return String(i);case"mm":return S.s(i,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")})},h.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},h.diff=function(e,o,l){var u,c=this,f=S.p(o),h=v(e),p=(h.utcOffset()-this.utcOffset())*6e4,m=this-h,y=function(){return S.m(c,h)};switch(f){case d:u=y()/12;break;case n:u=y();break;case i:u=y()/3;break;case s:u=(m-p)/6048e5;break;case"day":u=(m-p)/864e5;break;case r:u=m/36e5;break;case a:u=m/6e4;break;case t:u=m/1e3;break;default:u=m}return l?u:S.a(u)},h.daysInMonth=function(){return this.endOf(n).$D},h.$locale=function(){return p[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),r=g(e,t,!0);return r&&(a.$L=r),a},h.clone=function(){return S.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},f}(),C=D.prototype;return v.prototype=C,[["$ms",e],["$s",t],["$m",a],["$H",r],["$W","day"],["$M",n],["$y",d],["$D",o]].forEach(function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),v.extend=function(e,t){return e.$i||(e(t,D,v),e.$i=!0),v},v.locale=g,v.isDayjs=y,v.unix=function(e){return v(1e3*e)},v.en=p[h],v.Ls=p,v.p={},v},e.exports=t()},30210:(e,t,a)=>{"use strict";a.d(t,{NavBar:()=>f});var r=a(95155),s=a(12115),n=a(48173),i=a.n(n),d=a(14057);let o=(0,d.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),l=(0,d.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var u=a(83391),c=a(81654);let f=()=>{let[e,t]=(0,s.useState)(!1),a=(0,u.wA)(),{user:n}=(0,u.d4)(e=>e.auth);return(0,s.useEffect)(()=>{a((0,c.Ny)())},[a]),(0,r.jsxs)("nav",{className:"w-full min-h-[80px] h-auto bg-blue-400 text-white shadow-md",children:[(0,r.jsxs)("div",{className:"container mx-auto flex justify-between items-center h-full px-6",children:[(0,r.jsx)("div",{className:"lg:text-2xl text-xl font-bold",children:"LgMultiServices"}),(0,r.jsxs)("div",{className:"hidden md:flex space-x-8 text-lg",children:[(0,r.jsx)(i(),{href:"/",className:"hover:text-gray-200 transition",children:"Accueil"}),(null==n?void 0:n.name)!=""&&(0,r.jsxs)(r.Fragment,{children:[((null==n?void 0:n.role)=="admin"||(null==n?void 0:n.role)=="caissier")&&(0,r.jsx)(i(),{href:"/sales",className:"hover:text-gray-200 transition",children:"Vente"}),(null==n?void 0:n.role)==="admin"&&(0,r.jsx)(i(),{href:"/products",className:"hover:text-gray-200 transition",children:"Produits"}),((null==n?void 0:n.role)=="admin"||(null==n?void 0:n.role)=="impression")&&(0,r.jsx)(i(),{href:"/impressions",className:"hover:text-gray-200 transition",children:"Impression"}),(0,r.jsx)(i(),{href:"/account",className:"hover:text-gray-200 transition",children:"Compte"})]})]}),(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsx)("button",{onClick:()=>t(!e),children:e?(0,r.jsx)(o,{size:28}):(0,r.jsx)(l,{size:28})})})]}),e&&(0,r.jsx)("div",{className:"md:hidden bg-blue-700 py-4 z-[100]",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4 text-lg",children:[(0,r.jsx)(i(),{href:"/",className:"hover:text-gray-200 transition",onClick:()=>t(!1),children:"Accueil"}),(null==n?void 0:n.name)!=""&&(0,r.jsxs)(r.Fragment,{children:[((null==n?void 0:n.role)=="admin"||(null==n?void 0:n.role)=="caissier")&&(0,r.jsx)(i(),{href:"/sales",className:"hover:text-gray-200 transition",onClick:()=>t(!1),children:"Vente"}),(null==n?void 0:n.role)==="admin"&&(0,r.jsx)(i(),{href:"/products",className:"hover:text-gray-200 transition",onClick:()=>t(!1),children:"Produits"}),((null==n?void 0:n.role)=="admin"||(null==n?void 0:n.role)=="impression")&&(0,r.jsx)(i(),{href:"/impressions",className:"hover:text-gray-200 transition",onClick:()=>t(!1),children:"Impression"}),(0,r.jsx)(i(),{href:"/account",className:"hover:text-gray-200 transition",onClick:()=>t(!1),children:"Compte"})]})]})})]})}},81654:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>y,Lx:()=>i,Ny:()=>p,hG:()=>c,hU:()=>o,kg:()=>d,ri:()=>h});var r=a(48943),s=a(75033),n=a(27058);let i=(0,r.zD)("auth/loginUser",async e=>{let{name:t,password:a}=e,r=(0,n.rJ)(s.db,"users"),i=(0,n.P)(r,(0,n._M)("name","==",t),(0,n._M)("password","==",a)),d=await (0,n.GG)(i);if(!d.empty){let e=d.docs[0].id,t=(0,n.H9)(s.db,"users",e),a=await (0,n.x7)(t),r=a.data();if(r)return localStorage.setItem("id",a.id),localStorage.setItem("name",r.name),localStorage.setItem("role",r.role),{name:r.name,id:a.id,role:r.role}}throw Error("Identifiants incorrects")}),d=(0,r.zD)("auth/createUser",async e=>{let t=(0,n.rJ)(s.db,"users"),a=await (0,n.gS)(t,e);return{...e,id:a.id}}),o=(0,r.zD)("auth/fetchUsers",async()=>{let e=(0,n.rJ)(s.db,"users");return(await (0,n.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}),l=(0,r.zD)("auth/fetchUserById",async e=>{let t=(0,n.H9)(s.db,"users",e),a=await (0,n.x7)(t);if(a.exists())return{id:a.id,...a.data()};throw Error("Utilisateur non trouv\xe9")}),u=(0,r.zD)("auth/updateUser",async e=>{if(!e.id)throw Error("User ID is required");let t=(0,n.H9)(s.db,"users",e.id),{id:a,...r}=e;return await (0,n.mZ)(t,r),e}),c=(0,r.zD)("auth/deleteUser",async e=>{let t=(0,n.H9)(s.db,"users",e);return await (0,n.kd)(t),e}),f=(0,r.Z0)({name:"auth",initialState:{user:null,users:[]},reducers:{logout:e=>{e.user=null,localStorage.removeItem("id"),localStorage.removeItem("name"),localStorage.removeItem("role")},currentUser:e=>{e.user={id:localStorage.getItem("id")||"",name:localStorage.getItem("name")||"",role:localStorage.getItem("role")||""}},checkUser:e=>{let t=localStorage.getItem("id"),a=localStorage.getItem("name"),r=localStorage.getItem("role");t&&a&&r?e.user={id:t,name:a,role:r}:e.user=null}},extraReducers:e=>{e.addCase(i.fulfilled,(e,t)=>{e.user=t.payload}).addCase(o.fulfilled,(e,t)=>{e.users=t.payload}).addCase(l.fulfilled,(e,t)=>{e.users.find(e=>e.id===t.payload.id)||e.users.push(t.payload)}).addCase(d.fulfilled,(e,t)=>{e.users.push(t.payload)}).addCase(u.fulfilled,(e,t)=>{let a=e.users.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.users[a]=t.payload)}).addCase(c.fulfilled,(e,t)=>{e.users=e.users.filter(e=>e.id!==t.payload)})}}),{logout:h,currentUser:p,checkUser:m}=f.actions,y=f.reducer},52587:(e,t,a)=>{"use strict";a.d(t,{$y:()=>l,Ay:()=>h,GT:()=>f,Xv:()=>o,dd:()=>u,wG:()=>c});var r=a(48943),s=a(27058),n=a(75033),i=a(21455),d=a.n(i);let o=(0,r.zD)("impression/addImpression",async e=>({id:(await (0,s.gS)((0,s.rJ)(n.db,"impressions"),e)).id,...e})),l=(0,r.zD)("impression/fetchImpressions",async()=>(await (0,s.GG)((0,s.rJ)(n.db,"impressions"))).docs.map(e=>({id:e.id,...e.data()}))),u=(0,r.zD)("impression/deleteImpression",async e=>(await (0,s.kd)((0,s.H9)(n.db,"impressions",e)),e)),c=(0,r.zD)("impression/amountCurrentMonth",async()=>{let e=d()().startOf("month").format("YYYY-MM"),t=(0,s.rJ)(n.db,"impressions"),a=(0,s.P)(t,(0,s._M)("date",">=",e)),r=await (0,s.GG)(a),i=0;return r.docs.forEach(e=>{i+=e.data().amount||0}),i}),f=(0,r.zD)("impression/papersCountCurrentMonth",async()=>{let e=d()().startOf("month").format("YYYY-MM"),t=(0,s.rJ)(n.db,"impressions"),a=(0,s.P)(t,(0,s._M)("date",">=",e)),r=await (0,s.GG)(a),i=0;return r.docs.forEach(e=>{i+=e.data().totalPapers||0}),i}),h=(0,r.Z0)({name:"impression",initialState:{loading:!1,impression:null,error:"",impressionsAmountCurrentMonth:0,printedPapersCountCurrentMonth:0},reducers:{},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0}),e.addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.impression=t.payload}),e.addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}),e.addCase(o.fulfilled,(e,t)=>{e.impression=e.impression?[...e.impression,t.payload]:[t.payload]}),e.addCase(u.fulfilled,(e,t)=>{e.impression&&(e.impression=e.impression.filter(e=>e.id!==t.payload))}),e.addCase(c.fulfilled,(e,t)=>{e.impressionsAmountCurrentMonth=t.payload}),e.addCase(f.fulfilled,(e,t)=>{e.printedPapersCountCurrentMonth=t.payload})}}).reducer},94321:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>c,Bj:()=>i,DD:()=>l,Qu:()=>u,j0:()=>d,vc:()=>o});var r=a(48943),s=a(27058),n=a(75033);let i=(0,r.zD)("product/addProduct",async e=>({id:(await (0,s.gS)((0,s.rJ)(n.db,"products"),e)).id,...e})),d=(0,r.zD)("product/fetchProducts",async()=>(await (0,s.GG)((0,s.rJ)(n.db,"products"))).docs.map(e=>({id:e.id,...e.data()}))),o=(0,r.zD)("product/updateProduct",async e=>{let{id:t,newStock:a}=e,r=(0,s.H9)(n.db,"products",t);return await (0,s.mZ)(r,{stock:a}),{id:t,newStock:a}}),l=(0,r.zD)("product/deleteProduct",async e=>(await (0,s.kd)((0,s.H9)(n.db,"products",e)),e)),u=(0,r.zD)("product/totalStock",async()=>{let e=(0,s.rJ)(n.db,"products"),t=await (0,s.GG)(e),a=0;return t.docs.forEach(e=>{a+=e.data().stock||0}),a}),c=(0,r.Z0)({name:"product",initialState:{loading:!1,products:null,error:"",totalProductsInStock:0},reducers:{},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0}),e.addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.products=t.payload}),e.addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}),e.addCase(i.fulfilled,(e,t)=>{e.products=e.products?[...e.products,t.payload]:[t.payload]}),e.addCase(o.fulfilled,(e,t)=>{e.products&&(e.products=e.products.map(e=>e.id===t.payload.id?{...e,stock:t.payload.newStock}:e))}),e.addCase(l.fulfilled,(e,t)=>{e.products&&(e.products=e.products.filter(e=>e.id!==t.payload))}),e.addCase(u.fulfilled,(e,t)=>{e.totalProductsInStock=t.payload})}}).reducer},70449:(e,t,a)=>{"use strict";a.d(t,{ReduxProvider:()=>c});var r=a(95155),s=a(83391),n=a(48943),i=a(81654),d=a(94321),o=a(29009),l=a(52587);let u=(0,n.U1)({reducer:{auth:i.Ay,product:d.Ay,sale:o.Ay,impression:l.Ay}});a(12115);let c=e=>{let{children:t}=e;return(0,r.jsx)(s.Kq,{store:u,children:t})}},29009:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>g,FQ:()=>u,Op:()=>f,RA:()=>h,Vf:()=>i,aK:()=>c,dS:()=>l,h8:()=>m,j3:()=>d,ke:()=>p});var r=a(48943),s=a(27058),n=a(75033);let i=(0,r.zD)("sale/addSale",async e=>{try{let t=await (0,s.gS)((0,s.rJ)(n.db,"sales"),e);console.log("Vente ajout\xe9 avec ID :",t.id)}catch(e){console.error("Erreur lors de l'ajout :",e)}}),d=(0,r.zD)("sale/fetchSales",async()=>{try{let e=(await (0,s.GG)((0,s.rJ)(n.db,"sales"))).docs.map(e=>({id:e.id,...e.data()}));return console.log("ventes r\xe9cup\xe9r\xe9s :",e),e}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration :",e)}}),o=(0,r.zD)("sale/updateSale",async(e,t)=>{try{let a=(0,s.H9)(n.db,"sales",e);await (0,s.mZ)(a,t),console.log("Vente mis \xe0 jour !")}catch(e){console.error("Erreur lors de la mise \xe0 jour :",e)}}),l=(0,r.zD)("sale/deleteSale",async e=>{try{await (0,s.kd)((0,s.H9)(n.db,"sales",e)),console.log("Vente supprim\xe9 !")}catch(e){console.error("Erreur lors de la suppression :",e)}}),u=(0,r.zD)("sale/fetchSalesCountToday",async()=>{let e=new Date,t=e.getUTCFullYear(),a=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),i="".concat(t,"-").concat(a,"-").concat(r,"T00:00:00.000Z"),d=(0,s.rJ)(n.db,"sales"),o=(0,s.P)(d,(0,s._M)("date","==",i));return(await (0,s.GG)(o)).docs.length}),c=(0,r.zD)("sale/fetchTotalSalesCount",async()=>{let e=(0,s.rJ)(n.db,"sales");return(await (0,s.GG)(e)).docs.length}),f=(0,r.zD)("sale/amountToday",async()=>{let e=new Date,t=e.getUTCFullYear(),a=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),i="".concat(t,"-").concat(a,"-").concat(r,"T00:00:00.000Z"),d=(0,s.rJ)(n.db,"sales"),o=(0,s.P)(d,(0,s._M)("date","==",i)),l=await (0,s.GG)(o),u=0;return l.docs.forEach(e=>{let t=e.data();u+=t.total}),u}),h=(0,r.zD)("sale/totalAmount",async()=>{let e=(0,s.rJ)(n.db,"sales"),t=await (0,s.GG)(e),a=0;return t.docs.forEach(e=>{let t=e.data();a+=t.total}),a}),p=(0,r.zD)("sale/last10",async()=>{let e=(0,s.rJ)(n.db,"sales"),t=(0,s.P)(e,(0,s.My)("date","desc"),(0,s.AB)(10));return(await (0,s.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))}),m=(0,r.zD)("sale/last7Days",async()=>{let e=new Date,t=new Date;t.setDate(e.getDate()-7),t.setHours(0,0,0,0);let a="".concat(t.getUTCFullYear(),"-").concat(String(t.getUTCMonth()+1).padStart(2,"0"),"-").concat(String(t.getUTCDate()).padStart(2,"0"),"T00:00:00.000Z"),r=(0,s.rJ)(n.db,"sales"),i=(0,s.P)(r,(0,s._M)("date",">=",a)),d=await (0,s.GG)(i),o={};for(let t=6;t>=0;t--){let a=new Date;a.setDate(e.getDate()-t),o["".concat(a.getUTCFullYear(),"-").concat(String(a.getUTCMonth()+1).padStart(2,"0"),"-").concat(String(a.getUTCDate()).padStart(2,"0"),"T00:00:00.000Z").split("T")[0]]=0}return d.docs.forEach(e=>{let t=e.data(),a=new Date(t.date),r="".concat(a.getUTCFullYear(),"-").concat(String(a.getUTCMonth()+1).padStart(2,"0"),"-").concat(String(a.getUTCDate()).padStart(2,"0"),"T00:00:00.000Z").split("T")[0];o.hasOwnProperty(r)&&(o[r]+=t.total)}),o}),y=(0,r.zD)("sale/byProduct",async()=>{let e=(0,s.rJ)(n.db,"sales"),t=await (0,s.GG)(e),a={};return t.docs.forEach(e=>{e.data().articles.forEach(e=>{a[e.nom]||(a[e.nom]=0),a[e.nom]+=e.total})}),a}),g=(0,r.Z0)({name:"sale",initialState:{loading:!1,salesLast7Days:[],sales:null,error:"",salesByProduct:[],salesCountToday:0,totalSalesCount:0,salesAmountToday:0,totalSalesAmount:0},reducers:{},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0}).addCase(i.fulfilled,e=>{e.loading=!1}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(d.pending,e=>{e.loading=!0}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.sales=t.payload}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(o.pending,e=>{e.loading=!0}).addCase(o.fulfilled,e=>{e.loading=!1}).addCase(o.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(l.pending,e=>{e.loading=!0}).addCase(l.fulfilled,e=>{e.loading=!1}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(u.fulfilled,(e,t)=>{e.salesCountToday=t.payload}).addCase(c.fulfilled,(e,t)=>{e.totalSalesCount=t.payload}).addCase(f.fulfilled,(e,t)=>{e.salesAmountToday=t.payload}).addCase(h.fulfilled,(e,t)=>{e.totalSalesAmount=t.payload}).addCase(p.fulfilled,(e,t)=>{e.sales=t.payload}).addCase(m.fulfilled,(e,t)=>{e.salesLast7Days=t.payload}).addCase(y.fulfilled,(e,t)=>{e.salesByProduct=t.payload})}}).reducer},75033:(e,t,a)=>{"use strict";a.d(t,{db:()=>i});var r=a(49904),s=a(27058);let n=(0,r.Wp)({apiKey:"AIzaSyASZSWBGwPJYuQDRi1GObaNtrccuaBfu70",authDomain:"bgmultiservices-781c8.firebaseapp.com",projectId:"bgmultiservices-781c8",messagingSenderId:"749311417727",appId:"1:749311417727:web:3ea8698ba8ac3ac7ac8e4a"}),i=(0,s.aU)(n)},30347:()=>{},62093:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_4d318d",variable:"__variable_4d318d"}},27735:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ea5f4b",variable:"__variable_ea5f4b"}}},e=>{var t=t=>e(e.s=t);e.O(0,[360,992,876,125,441,517,358],()=>t(42640)),_N_E=e.O()}]);