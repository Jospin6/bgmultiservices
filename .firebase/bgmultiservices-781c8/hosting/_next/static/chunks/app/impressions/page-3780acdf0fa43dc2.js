(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[499],{46372:(e,t,r)=>{Promise.resolve().then(r.bind(r,27189))},21455:function(e){var t;t=function(){"use strict";var e="millisecond",t="second",r="minute",s="hour",a="week",n="month",i="quarter",u="year",o="date",d="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,c=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(e,t,r){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(r)+e},f="en",m={};m[f]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||"th")+"]"}};var p="$isDayjsObject",y=function(e){return e instanceof v||!(!e||!e[p])},g=function e(t,r,s){var a;if(!t)return f;if("string"==typeof t){var n=t.toLowerCase();m[n]&&(a=n),r&&(m[n]=r,a=n);var i=t.split("-");if(!a&&i.length>1)return e(i[0])}else{var u=t.name;m[u]=t,a=u}return!s&&a&&(f=a),a||!s&&f},$=function(e,t){if(y(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new v(r)},b={s:h,z:function(e){var t=-e.utcOffset(),r=Math.abs(t);return(t<=0?"+":"-")+h(Math.floor(r/60),2,"0")+":"+h(r%60,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var s=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(s,n),i=r-a<0,u=t.clone().add(s+(i?-1:1),n);return+(-(s+(r-a)/(i?a-u:u-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(d){return({M:n,y:u,w:a,d:"day",D:o,h:s,m:r,s:t,ms:e,Q:i})[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};b.l=g,b.i=y,b.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var v=function(){function h(e){this.$L=g(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[p]=!0}var f=h.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(l);if(s){var a=s[2]-1||0,n=(s[7]||"0").substring(0,3);return r?new Date(Date.UTC(s[1],a,s[3]||1,s[4]||0,s[5]||0,s[6]||0,n)):new Date(s[1],a,s[3]||1,s[4]||0,s[5]||0,s[6]||0,n)}}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return b},f.isValid=function(){return this.$d.toString()!==d},f.isSame=function(e,t){var r=$(e);return this.startOf(t)<=r&&r<=this.endOf(t)},f.isAfter=function(e,t){return $(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<$(e)},f.$g=function(e,t,r){return b.u(e)?this[t]:this.set(r,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,i){var d=this,l=!!b.u(i)||i,c=b.p(e),h=function(e,t){var r=b.w(d.$u?Date.UTC(d.$y,t,e):new Date(d.$y,t,e),d);return l?r:r.endOf("day")},f=function(e,t){return b.w(d.toDate()[e].apply(d.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),d)},m=this.$W,p=this.$M,y=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case u:return l?h(1,0):h(31,11);case n:return l?h(1,p):h(0,p+1);case a:var $=this.$locale().weekStart||0,v=(m<$?m+7:m)-$;return h(l?y-v:y+(6-v),p);case"day":case o:return f(g+"Hours",0);case s:return f(g+"Minutes",1);case r:return f(g+"Seconds",2);case t:return f(g+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(a,i){var d,l=b.p(a),c="set"+(this.$u?"UTC":""),h=((d={}).day=c+"Date",d[o]=c+"Date",d[n]=c+"Month",d[u]=c+"FullYear",d[s]=c+"Hours",d[r]=c+"Minutes",d[t]=c+"Seconds",d[e]=c+"Milliseconds",d)[l],f="day"===l?this.$D+(i-this.$W):i;if(l===n||l===u){var m=this.clone().set(o,1);m.$d[h](f),m.init(),this.$d=m.set(o,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](f);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[b.p(e)]()},f.add=function(e,i){var o,d=this;e=Number(e);var l=b.p(i),c=function(t){var r=$(d);return b.w(r.date(r.date()+Math.round(t*e)),d)};if(l===n)return this.set(n,this.$M+e);if(l===u)return this.set(u,this.$y+e);if("day"===l)return c(1);if(l===a)return c(7);var h=((o={})[r]=6e4,o[s]=36e5,o[t]=1e3,o)[l]||1,f=this.$d.getTime()+e*h;return b.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var s=e||"YYYY-MM-DDTHH:mm:ssZ",a=b.z(this),n=this.$H,i=this.$m,u=this.$M,o=r.weekdays,l=r.months,h=r.meridiem,f=function(e,r,a,n){return e&&(e[r]||e(t,s))||a[r].slice(0,n)},m=function(e){return b.s(n%12||12,e,"0")},p=h||function(e,t,r){var s=e<12?"AM":"PM";return r?s.toLowerCase():s};return s.replace(c,function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return b.s(t.$y,4,"0");case"M":return u+1;case"MM":return b.s(u+1,2,"0");case"MMM":return f(r.monthsShort,u,l,3);case"MMMM":return f(l,u);case"D":return t.$D;case"DD":return b.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return f(r.weekdaysMin,t.$W,o,2);case"ddd":return f(r.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(n);case"HH":return b.s(n,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return p(n,i,!0);case"A":return p(n,i,!1);case"m":return String(i);case"mm":return b.s(i,2,"0");case"s":return String(t.$s);case"ss":return b.s(t.$s,2,"0");case"SSS":return b.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")})},f.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},f.diff=function(e,o,d){var l,c=this,h=b.p(o),f=$(e),m=(f.utcOffset()-this.utcOffset())*6e4,p=this-f,y=function(){return b.m(c,f)};switch(h){case u:l=y()/12;break;case n:l=y();break;case i:l=y()/3;break;case a:l=(p-m)/6048e5;break;case"day":l=(p-m)/864e5;break;case s:l=p/36e5;break;case r:l=p/6e4;break;case t:l=p/1e3;break;default:l=p}return d?l:b.a(l)},f.daysInMonth=function(){return this.endOf(n).$D},f.$locale=function(){return m[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),s=g(e,t,!0);return s&&(r.$L=s),r},f.clone=function(){return b.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},h}(),w=v.prototype;return $.prototype=w,[["$ms",e],["$s",t],["$m",r],["$H",s],["$W","day"],["$M",n],["$y",u],["$D",o]].forEach(function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),$.extend=function(e,t){return e.$i||(e(t,v,$),e.$i=!0),$},$.locale=g,$.isDayjs=y,$.unix=function(e){return $(1e3*e)},$.en=m[f],$.Ls=m,$.p={},$},e.exports=t()},27189:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(95155),a=r(12115),n=r(83391),i=r(52587),u=r(81654);let o=()=>{let[e,t]=(0,a.useState)(0),[r,o]=(0,a.useState)(0),d=(0,n.wA)(),l=(0,n.d4)(e=>e.auth.user),c=new Date().setUTCHours(0,0,0,0);return(0,a.useEffect)(()=>{d((0,u.Ny)())},[d]),(0,s.jsxs)("div",{className:"md:px-[10%] px-4",children:[(0,s.jsx)("h2",{className:"w-full bg-blue-400 p-4 rounded-t-lg text-white",children:"Rapport d'impression"}),(0,s.jsxs)("form",{onSubmit:s=>{s.preventDefault(),d((0,i.Xv)({totalPapers:e,amount:r,user:null==l?void 0:l.name,date:new Date(c).toISOString()})),o(0),t(0)},children:[" ",(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("label",{htmlFor:"nom",children:"Nombre de papiers"}),(0,s.jsx)("input",{type:"number",id:"nom",className:"block pl-2 border-[1px] border-gray-300 w-full rounded-lg h-[35px]",placeholder:"Nombre de papiers",onChange:e=>t(Number(e.target.value))})]}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("label",{htmlFor:"prix",className:"block",children:"Montant"}),(0,s.jsx)("input",{type:"number",id:"prix",placeholder:"Montant",className:"pl-2 border-[1px] border-gray-300 w-full rounded-lg h-[35px]",onChange:e=>o(Number(e.target.value))})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",className:"px-[10px] py-[3px] rounded-lg bg-blue-400 my-2 text-gray-100",children:"Ajouter"})})]})]})};var d=r(14732),l=r(82715);function c(){let e=(0,n.wA)(),{impression:t}=(0,n.d4)(e=>e.impression);(0,a.useEffect)(()=>{e((0,i.$y)())},[e]);let r=t=>e((0,i.dd)(t));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl py-4",children:"Impression"}),(0,s.jsx)(o,{}),(0,s.jsx)("div",{className:"text-xl py-4",children:"les impressions"}),(0,s.jsxs)("table",{className:"w-full text-center",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b-[1px] border-gray-300",children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"Nombre des papiers"}),(0,s.jsx)("th",{children:"Montant"}),(0,s.jsx)("th",{children:"Encod\xe9 par"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:null==t?void 0:t.map(e=>(0,s.jsxs)("tr",{className:"border-b-[1px] border-gray-300",children:[(0,s.jsxs)("td",{children:[" ",(0,d.l)(e.date)," "]}),(0,s.jsxs)("td",{children:[" ",e.totalPapers," "]}),(0,s.jsxs)("td",{children:[" ",e.amount," fc "]}),(0,s.jsxs)("td",{children:[" ",e.user," "]}),(0,s.jsx)("td",{className:"flex justify-center",children:(0,s.jsx)(l.A,{size:20,className:"text-red-500",onClick:()=>r(e.id)})})]},e.id))})]})]})}},81654:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>y,Lx:()=>i,Ny:()=>m,hG:()=>c,hU:()=>o,kg:()=>u,ri:()=>f});var s=r(48943),a=r(75033),n=r(27058);let i=(0,s.zD)("auth/loginUser",async e=>{let{name:t,password:r}=e,s=(0,n.rJ)(a.db,"users"),i=(0,n.P)(s,(0,n._M)("name","==",t),(0,n._M)("password","==",r)),u=await (0,n.GG)(i);if(!u.empty){let e=u.docs[0].id,t=(0,n.H9)(a.db,"users",e),r=await (0,n.x7)(t),s=r.data();if(s)return localStorage.setItem("id",r.id),localStorage.setItem("name",s.name),localStorage.setItem("role",s.role),{name:s.name,id:r.id,role:s.role}}throw Error("Identifiants incorrects")}),u=(0,s.zD)("auth/createUser",async e=>{let t=(0,n.rJ)(a.db,"users"),r=await (0,n.gS)(t,e);return{...e,id:r.id}}),o=(0,s.zD)("auth/fetchUsers",async()=>{let e=(0,n.rJ)(a.db,"users");return(await (0,n.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}),d=(0,s.zD)("auth/fetchUserById",async e=>{let t=(0,n.H9)(a.db,"users",e),r=await (0,n.x7)(t);if(r.exists())return{id:r.id,...r.data()};throw Error("Utilisateur non trouv\xe9")}),l=(0,s.zD)("auth/updateUser",async e=>{if(!e.id)throw Error("User ID is required");let t=(0,n.H9)(a.db,"users",e.id),{id:r,...s}=e;return await (0,n.mZ)(t,s),e}),c=(0,s.zD)("auth/deleteUser",async e=>{let t=(0,n.H9)(a.db,"users",e);return await (0,n.kd)(t),e}),h=(0,s.Z0)({name:"auth",initialState:{user:null,users:[]},reducers:{logout:e=>{e.user=null,localStorage.removeItem("id"),localStorage.removeItem("name"),localStorage.removeItem("role")},currentUser:e=>{e.user={id:localStorage.getItem("id")||"",name:localStorage.getItem("name")||"",role:localStorage.getItem("role")||""}},checkUser:e=>{let t=localStorage.getItem("id"),r=localStorage.getItem("name"),s=localStorage.getItem("role");t&&r&&s?e.user={id:t,name:r,role:s}:e.user=null}},extraReducers:e=>{e.addCase(i.fulfilled,(e,t)=>{e.user=t.payload}).addCase(o.fulfilled,(e,t)=>{e.users=t.payload}).addCase(d.fulfilled,(e,t)=>{e.users.find(e=>e.id===t.payload.id)||e.users.push(t.payload)}).addCase(u.fulfilled,(e,t)=>{e.users.push(t.payload)}).addCase(l.fulfilled,(e,t)=>{let r=e.users.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.users[r]=t.payload)}).addCase(c.fulfilled,(e,t)=>{e.users=e.users.filter(e=>e.id!==t.payload)})}}),{logout:f,currentUser:m,checkUser:p}=h.actions,y=h.reducer},52587:(e,t,r)=>{"use strict";r.d(t,{$y:()=>d,AK:()=>m,Ay:()=>y,GT:()=>h,Xv:()=>o,bH:()=>p,dd:()=>l,oC:()=>f,wG:()=>c});var s=r(48943),a=r(27058),n=r(75033),i=r(21455),u=r.n(i);let o=(0,s.zD)("impression/addImpression",async e=>({id:(await (0,a.gS)((0,a.rJ)(n.db,"impressions"),e)).id,...e})),d=(0,s.zD)("impression/fetchImpressions",async()=>(await (0,a.GG)((0,a.rJ)(n.db,"impressions"))).docs.map(e=>({id:e.id,...e.data()}))),l=(0,s.zD)("impression/deleteImpression",async e=>(await (0,a.kd)((0,a.H9)(n.db,"impressions",e)),e)),c=(0,s.zD)("impression/amountCurrentMonth",async()=>{let e=u()().startOf("month").format("YYYY-MM"),t=(0,a.rJ)(n.db,"impressions"),r=(0,a.P)(t,(0,a._M)("date",">=",e)),s=await (0,a.GG)(r),i=0;return s.docs.forEach(e=>{i+=e.data().amount||0}),i}),h=(0,s.zD)("impression/papersCountCurrentMonth",async()=>{let e=u()().startOf("month").format("YYYY-MM"),t=(0,a.rJ)(n.db,"impressions"),r=(0,a.P)(t,(0,a._M)("date",">=",e)),s=await (0,a.GG)(r),i=0;return s.docs.forEach(e=>{i+=e.data().totalPapers||0}),i}),f=(0,s.zD)("impression/fetchSumDayImpressions",async e=>{let t=(0,a.rJ)(n.db,"impressions"),r=(0,a.P)(t,(0,a._M)("date","==",e)),s=await (0,a.GG)(r),i=0;return s.docs.forEach(e=>{i+=e.data().amount||0}),i}),m=(0,s.zD)("impression/fetchCountDayImpressions",async e=>{let t=(0,a.rJ)(n.db,"impressions"),r=(0,a.P)(t,(0,a._M)("date","==",e)),s=await (0,a.GG)(r),i=0;return s.docs.forEach(e=>{i+=e.data().totalPapers||0}),i}),p=(0,s.zD)("impression/fetchAllDaysImpressions",async e=>{let t=(0,a.rJ)(n.db,"impressions"),r=(0,a.P)(t,(0,a._M)("date","==",e));return(await (0,a.GG)(r)).docs.map(e=>({id:e.id,...e.data()}))}),y=(0,s.Z0)({name:"impression",initialState:{loading:!1,impression:null,error:"",impressionsAmountCurrentMonth:0,printedPapersCountCurrentMonth:0,nbrImprDay:0,sumImprDay:0,allImprDay:[]},reducers:{},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0}),e.addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.impression=t.payload}),e.addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}),e.addCase(o.fulfilled,(e,t)=>{e.impression=e.impression?[...e.impression,t.payload]:[t.payload]}),e.addCase(l.fulfilled,(e,t)=>{e.impression&&(e.impression=e.impression.filter(e=>e.id!==t.payload))}),e.addCase(c.fulfilled,(e,t)=>{e.impressionsAmountCurrentMonth=t.payload}),e.addCase(h.fulfilled,(e,t)=>{e.printedPapersCountCurrentMonth=t.payload}),e.addCase(f.fulfilled,(e,t)=>{e.sumImprDay=t.payload}),e.addCase(m.fulfilled,(e,t)=>{e.nbrImprDay=t.payload}),e.addCase(p.fulfilled,(e,t)=>{e.allImprDay=t.payload})}}).reducer},14732:(e,t,r)=>{"use strict";r.d(t,{l:()=>s});let s=e=>{let t=new Date(e),r=String(t.getUTCDate()).padStart(2,"0"),s=String(t.getUTCMonth()+1).padStart(2,"0"),a=t.getUTCFullYear();return"".concat(r," ").concat(s," ").concat(a)}},75033:(e,t,r)=>{"use strict";r.d(t,{db:()=>i});var s=r(49904),a=r(27058);let n=(0,s.Wp)({apiKey:"AIzaSyASZSWBGwPJYuQDRi1GObaNtrccuaBfu70",authDomain:"bgmultiservices-781c8.firebaseapp.com",projectId:"bgmultiservices-781c8",messagingSenderId:"749311417727",appId:"1:749311417727:web:3ea8698ba8ac3ac7ac8e4a"}),i=(0,a.aU)(n)},14057:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(12115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:u=2,absoluteStrokeWidth:o,className:d="",children:l,iconNode:c,...h}=e;return(0,s.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:r,strokeWidth:o?24*Number(u)/Number(a):u,className:n("lucide",d),...h},[...c.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(l)?l:[l]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{className:o,...d}=r;return(0,s.createElement)(u,{ref:i,iconNode:t,className:n("lucide-".concat(a(e)),o),...d})});return r.displayName="".concat(e),r}},82715:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14057).A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[992,876,441,517,358],()=>t(46372)),_N_E=e.O()}]);