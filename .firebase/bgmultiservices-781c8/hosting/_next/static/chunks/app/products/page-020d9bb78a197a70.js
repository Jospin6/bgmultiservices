(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{63956:(e,r,t)=>{Promise.resolve().then(t.bind(t,47575))},47575:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var a=t(95155),s=t(12115),l=t(83391),d=t(94321),c=t(81654);let o=()=>{let[e,r]=(0,s.useState)(""),[t,o]=(0,s.useState)(0),[i,u]=(0,s.useState)(0),n=(0,l.wA)(),p=(0,l.d4)(e=>e.auth.user);return(0,s.useEffect)(()=>{n((0,c.Ny)())},[n]),(0,a.jsxs)("div",{className:"md:px-[10%] px-4",children:[(0,a.jsx)("h2",{className:"w-full bg-blue-400 p-4 rounded-t-lg text-white",children:"Ajouter un Produit"}),(0,a.jsxs)("form",{onSubmit:r=>{r.preventDefault(),n((0,d.Bj)({nom:e,prix:t,stock:i,user:null==p?void 0:p.name}))},children:[(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("label",{htmlFor:"nom",children:"Nom du produit"}),(0,a.jsx)("input",{type:"text",id:"nom",className:"block pl-2 border-[1px] border-gray-300 w-full rounded-lg h-[35px]",placeholder:"Nom",onChange:e=>r(e.target.value)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"mt-2 col-span-2",children:[(0,a.jsx)("label",{htmlFor:"prix",className:"block",children:"Prix du produit"}),(0,a.jsx)("input",{type:"number",id:"prix",placeholder:"Prix",className:"pl-2 border-[1px] border-gray-300 w-full rounded-lg h-[35px]",onChange:e=>o(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:"mt-2 col-span-2",children:[(0,a.jsx)("label",{htmlFor:"stock",className:"block",children:"Quantit\xe9 en stock"}),(0,a.jsx)("input",{type:"number",id:"stock",placeholder:"Stock",className:"pl-2 border-[1px] border-gray-300 w-full rounded-lg h-[35px]",onChange:e=>u(Number(e.target.value))})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",className:"px-[10px] py-[3px] rounded-lg bg-blue-400 my-2 text-gray-100",children:"Ajouter"})})]})]})},i=(0,t(14057).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var u=t(82715);function n(){let e=(0,l.wA)(),{products:r}=(0,l.d4)(e=>e.product),[t,c]=(0,s.useState)(!1),[n,p]=(0,s.useState)(null),[m,h]=(0,s.useState)(0);(0,s.useEffect)(()=>{e((0,d.j0)())},[e]);let x=e=>{p(e),h(e.stock),c(!0)},g=r=>e((0,d.DD)(r));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-2xl py-4",children:"produits"}),(0,a.jsx)(o,{}),(0,a.jsx)("div",{className:"text-xl py-4",children:"les produits en stock"}),(0,a.jsxs)("table",{className:"w-full text-center mb-4",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b-[1px] border-gray-300 border-collapse border border-gray-300",children:[(0,a.jsx)("th",{children:"Article"}),(0,a.jsx)("th",{children:"Prix"}),(0,a.jsx)("th",{children:"Stock"}),(0,a.jsx)("th",{children:"Encod\xe9 par"}),(0,a.jsx)("th",{children:"Action"})]})}),(0,a.jsx)("tbody",{children:null==r?void 0:r.map(e=>(0,a.jsxs)("tr",{className:"border-[1px] border-gray-300",children:[(0,a.jsx)("td",{children:e.nom}),(0,a.jsxs)("td",{children:[e.prix," fc"]}),(0,a.jsxs)("td",{children:[e.stock," pi\xe8ces"]}),(0,a.jsxs)("td",{children:[e.user," "]}),(0,a.jsxs)("td",{className:"flex justify-center",children:[(0,a.jsx)(i,{size:20,onClick:()=>x(e),className:"cursor-pointer"}),(0,a.jsx)("span",{className:"w-[10px]"}),(0,a.jsx)(u.A,{size:20,onClick:()=>g(e.id),className:"cursor-pointer text-red-500"})]})]},e.id))})]}),t&&n&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg w-1/3",children:[(0,a.jsx)("h2",{className:"text-xl mb-4",children:"Mettre \xe0 jour le stock"}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("label",{className:"block",children:["Produit: ",n.nom]})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"block",children:["Stock actuel: ",n.stock]}),(0,a.jsx)("input",{type:"number",className:"border-[1px] border-gray-300 rounded-lg w-full mt-2",value:m,onChange:e=>h(Number(e.target.value)),min:0})]}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)("button",{onClick:()=>{n&&(e((0,d.vc)({id:n.id,newStock:m})),c(!1))},className:"bg-blue-400 text-white px-4 py-2 rounded-lg",children:"Mettre \xe0 jour"}),(0,a.jsx)("button",{onClick:()=>c(!1),className:"ml-2 bg-gray-400 text-white px-4 py-2 rounded-lg",children:"Annuler"})]})]})})]})}},81654:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>g,Lx:()=>d,Ny:()=>h,hG:()=>n,hU:()=>o,kg:()=>c,ri:()=>m});var a=t(48943),s=t(75033),l=t(27058);let d=(0,a.zD)("auth/loginUser",async e=>{let{name:r,password:t}=e,a=(0,l.rJ)(s.db,"users"),d=(0,l.P)(a,(0,l._M)("name","==",r),(0,l._M)("password","==",t)),c=await (0,l.GG)(d);if(!c.empty){let e=c.docs[0].id,r=(0,l.H9)(s.db,"users",e),t=await (0,l.x7)(r),a=t.data();if(a)return localStorage.setItem("id",t.id),localStorage.setItem("name",a.name),localStorage.setItem("role",a.role),{name:a.name,id:t.id,role:a.role}}throw Error("Identifiants incorrects")}),c=(0,a.zD)("auth/createUser",async e=>{let r=(0,l.rJ)(s.db,"users"),t=await (0,l.gS)(r,e);return{...e,id:t.id}}),o=(0,a.zD)("auth/fetchUsers",async()=>{let e=(0,l.rJ)(s.db,"users");return(await (0,l.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}),i=(0,a.zD)("auth/fetchUserById",async e=>{let r=(0,l.H9)(s.db,"users",e),t=await (0,l.x7)(r);if(t.exists())return{id:t.id,...t.data()};throw Error("Utilisateur non trouv\xe9")}),u=(0,a.zD)("auth/updateUser",async e=>{if(!e.id)throw Error("User ID is required");let r=(0,l.H9)(s.db,"users",e.id),{id:t,...a}=e;return await (0,l.mZ)(r,a),e}),n=(0,a.zD)("auth/deleteUser",async e=>{let r=(0,l.H9)(s.db,"users",e);return await (0,l.kd)(r),e}),p=(0,a.Z0)({name:"auth",initialState:{user:null,users:[]},reducers:{logout:e=>{e.user=null,localStorage.removeItem("id"),localStorage.removeItem("name"),localStorage.removeItem("role")},currentUser:e=>{e.user={id:localStorage.getItem("id")||"",name:localStorage.getItem("name")||"",role:localStorage.getItem("role")||""}},checkUser:e=>{let r=localStorage.getItem("id"),t=localStorage.getItem("name"),a=localStorage.getItem("role");r&&t&&a?e.user={id:r,name:t,role:a}:e.user=null}},extraReducers:e=>{e.addCase(d.fulfilled,(e,r)=>{e.user=r.payload}).addCase(o.fulfilled,(e,r)=>{e.users=r.payload}).addCase(i.fulfilled,(e,r)=>{e.users.find(e=>e.id===r.payload.id)||e.users.push(r.payload)}).addCase(c.fulfilled,(e,r)=>{e.users.push(r.payload)}).addCase(u.fulfilled,(e,r)=>{let t=e.users.findIndex(e=>e.id===r.payload.id);-1!==t&&(e.users[t]=r.payload)}).addCase(n.fulfilled,(e,r)=>{e.users=e.users.filter(e=>e.id!==r.payload)})}}),{logout:m,currentUser:h,checkUser:x}=p.actions,g=p.reducer},94321:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>n,Bj:()=>d,DD:()=>i,Qu:()=>u,j0:()=>c,vc:()=>o});var a=t(48943),s=t(27058),l=t(75033);let d=(0,a.zD)("product/addProduct",async e=>({id:(await (0,s.gS)((0,s.rJ)(l.db,"products"),e)).id,...e})),c=(0,a.zD)("product/fetchProducts",async()=>(await (0,s.GG)((0,s.rJ)(l.db,"products"))).docs.map(e=>({id:e.id,...e.data()}))),o=(0,a.zD)("product/updateProduct",async e=>{let{id:r,newStock:t}=e,a=(0,s.H9)(l.db,"products",r);return await (0,s.mZ)(a,{stock:t}),{id:r,newStock:t}}),i=(0,a.zD)("product/deleteProduct",async e=>(await (0,s.kd)((0,s.H9)(l.db,"products",e)),e)),u=(0,a.zD)("product/totalStock",async()=>{let e=(0,s.rJ)(l.db,"products"),r=await (0,s.GG)(e),t=0;return r.docs.forEach(e=>{t+=e.data().stock||0}),t}),n=(0,a.Z0)({name:"product",initialState:{loading:!1,products:null,error:"",totalProductsInStock:0},reducers:{},extraReducers:e=>{e.addCase(c.pending,e=>{e.loading=!0}),e.addCase(c.fulfilled,(e,r)=>{e.loading=!1,e.products=r.payload}),e.addCase(c.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),e.addCase(d.fulfilled,(e,r)=>{e.products=e.products?[...e.products,r.payload]:[r.payload]}),e.addCase(o.fulfilled,(e,r)=>{e.products&&(e.products=e.products.map(e=>e.id===r.payload.id?{...e,stock:r.payload.newStock}:e))}),e.addCase(i.fulfilled,(e,r)=>{e.products&&(e.products=e.products.filter(e=>e.id!==r.payload))}),e.addCase(u.fulfilled,(e,r)=>{e.totalProductsInStock=r.payload})}}).reducer},75033:(e,r,t)=>{"use strict";t.d(r,{db:()=>d});var a=t(49904),s=t(27058);let l=(0,a.Wp)({apiKey:"AIzaSyASZSWBGwPJYuQDRi1GObaNtrccuaBfu70",authDomain:"bgmultiservices-781c8.firebaseapp.com",projectId:"bgmultiservices-781c8",messagingSenderId:"749311417727",appId:"1:749311417727:web:3ea8698ba8ac3ac7ac8e4a"}),d=(0,s.aU)(l)},14057:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var a=t(12115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:i="",children:u,iconNode:n,...p}=e;return(0,a.createElement)("svg",{ref:r,...d,width:s,height:s,stroke:t,strokeWidth:o?24*Number(c)/Number(s):c,className:l("lucide",i),...p},[...n.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(u)?u:[u]])}),o=(e,r)=>{let t=(0,a.forwardRef)((t,d)=>{let{className:o,...i}=t;return(0,a.createElement)(c,{ref:d,iconNode:r,className:l("lucide-".concat(s(e)),o),...i})});return t.displayName="".concat(e),t}},82715:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(14057).A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[992,876,441,517,358],()=>r(63956)),_N_E=e.O()}]);