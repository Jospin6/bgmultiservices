(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{63956:(e,t,r)=>{Promise.resolve().then(r.bind(r,47575))},47575:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(95155),a=r(12115),d=r(83391),l=r(94321);let c=()=>{let[e,t]=(0,a.useState)(""),[r,c]=(0,a.useState)(0),[o,i]=(0,a.useState)(0),n=(0,d.wA)();return(0,s.jsxs)("div",{className:"md:px-[10%] px-4",children:[(0,s.jsx)("h2",{className:"w-full bg-blue-400 p-4 rounded-t-lg text-white",children:"Ajouter un Produit"}),(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault(),n((0,l.Bj)({nom:e,prix:r,stock:o}))},children:[(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("label",{htmlFor:"nom",children:"Nom du produit"}),(0,s.jsx)("input",{type:"text",id:"nom",className:"block pl-2 border-[1px] border-gray-300 w-full rounded-lg h-[35px]",placeholder:"Nom",onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"mt-2 col-span-2",children:[(0,s.jsx)("label",{htmlFor:"prix",className:"block",children:"Prix du produit"}),(0,s.jsx)("input",{type:"number",id:"prix",placeholder:"Prix",className:"pl-2 border-[1px] border-gray-300 w-full rounded-lg h-[35px]",onChange:e=>c(Number(e.target.value))})]}),(0,s.jsxs)("div",{className:"mt-2 col-span-2",children:[(0,s.jsx)("label",{htmlFor:"stock",className:"block",children:"Quantit\xe9 en stock"}),(0,s.jsx)("input",{type:"number",id:"stock",placeholder:"Stock",className:"pl-2 border-[1px] border-gray-300 w-full rounded-lg h-[35px]",onChange:e=>i(Number(e.target.value))})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",className:"px-[10px] py-[3px] rounded-lg bg-blue-400 my-2 text-gray-100",children:"Ajouter"})})]})]})},o=(0,r(14057).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var i=r(82715);function n(){let e=(0,d.wA)(),{products:t}=(0,d.d4)(e=>e.product),[r,n]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),[x,m]=(0,a.useState)(0);(0,a.useEffect)(()=>{e((0,l.j0)())},[e]);let h=e=>{p(e),m(e.stock),n(!0)},b=t=>e((0,l.DD)(t));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl py-4",children:"produits"}),(0,s.jsx)(c,{}),(0,s.jsx)("div",{className:"text-xl py-4",children:"les produits en stock"}),(0,s.jsxs)("table",{className:"w-full text-center",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b-[1px] border-gray-300",children:[(0,s.jsx)("th",{children:"Article"}),(0,s.jsx)("th",{children:"Prix"}),(0,s.jsx)("th",{children:"Stock"}),(0,s.jsx)("th",{children:"Action"})]})}),(0,s.jsx)("tbody",{children:null==t?void 0:t.map(e=>(0,s.jsxs)("tr",{className:"border-b-[1px] border-gray-300",children:[(0,s.jsx)("td",{children:e.nom}),(0,s.jsxs)("td",{children:[e.prix," fc"]}),(0,s.jsxs)("td",{children:[e.stock," pi\xe8ces"]}),(0,s.jsxs)("td",{className:"flex justify-center",children:[(0,s.jsx)(o,{size:20,onClick:()=>h(e),className:"cursor-pointer"}),(0,s.jsx)("span",{className:"w-[10px]"}),(0,s.jsx)(i.A,{size:20,onClick:()=>b(e.id),className:"cursor-pointer text-red-500"})]})]},e.id))})]}),r&&u&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg w-1/3",children:[(0,s.jsx)("h2",{className:"text-xl mb-4",children:"Mettre \xe0 jour le stock"}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("label",{className:"block",children:["Produit: ",u.nom]})}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block",children:["Stock actuel: ",u.stock]}),(0,s.jsx)("input",{type:"number",className:"border-[1px] border-gray-300 rounded-lg w-full mt-2",value:x,onChange:e=>m(Number(e.target.value)),min:0})]}),(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsx)("button",{onClick:()=>{u&&(e((0,l.vc)({id:u.id,newStock:x})),n(!1))},className:"bg-blue-400 text-white px-4 py-2 rounded-lg",children:"Mettre \xe0 jour"}),(0,s.jsx)("button",{onClick:()=>n(!1),className:"ml-2 bg-gray-400 text-white px-4 py-2 rounded-lg",children:"Annuler"})]})]})})]})}},94321:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,Bj:()=>l,DD:()=>i,Qu:()=>n,j0:()=>c,vc:()=>o});var s=r(48943),a=r(27058),d=r(75033);let l=(0,s.zD)("product/addProduct",async e=>({id:(await (0,a.gS)((0,a.rJ)(d.db,"products"),e)).id,...e})),c=(0,s.zD)("product/fetchProducts",async()=>(await (0,a.GG)((0,a.rJ)(d.db,"products"))).docs.map(e=>({id:e.id,...e.data()}))),o=(0,s.zD)("product/updateProduct",async e=>{let{id:t,newStock:r}=e,s=(0,a.H9)(d.db,"products",t);return await (0,a.mZ)(s,{stock:r}),{id:t,newStock:r}}),i=(0,s.zD)("product/deleteProduct",async e=>(await (0,a.kd)((0,a.H9)(d.db,"products",e)),e)),n=(0,s.zD)("product/totalStock",async()=>{let e=(0,a.rJ)(d.db,"products"),t=await (0,a.GG)(e),r=0;return t.docs.forEach(e=>{r+=e.data().stock||0}),r}),u=(0,s.Z0)({name:"product",initialState:{loading:!1,products:null,error:"",totalProductsInStock:0},reducers:{},extraReducers:e=>{e.addCase(c.pending,e=>{e.loading=!0}),e.addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.products=t.payload}),e.addCase(c.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}),e.addCase(l.fulfilled,(e,t)=>{e.products=e.products?[...e.products,t.payload]:[t.payload]}),e.addCase(o.fulfilled,(e,t)=>{e.products&&(e.products=e.products.map(e=>e.id===t.payload.id?{...e,stock:t.payload.newStock}:e))}),e.addCase(i.fulfilled,(e,t)=>{e.products&&(e.products=e.products.filter(e=>e.id!==t.payload))}),e.addCase(n.fulfilled,(e,t)=>{e.totalProductsInStock=t.payload})}}).reducer},75033:(e,t,r)=>{"use strict";r.d(t,{db:()=>l});var s=r(49904),a=r(27058);let d=(0,s.Wp)({apiKey:"AIzaSyASZSWBGwPJYuQDRi1GObaNtrccuaBfu70",authDomain:"bgmultiservices-781c8.firebaseapp.com",projectId:"bgmultiservices-781c8",messagingSenderId:"749311417727",appId:"1:749311417727:web:3ea8698ba8ac3ac7ac8e4a"}),l=(0,a.aU)(d)},14057:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(12115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:i="",children:n,iconNode:u,...p}=e;return(0,s.createElement)("svg",{ref:t,...l,width:a,height:a,stroke:r,strokeWidth:o?24*Number(c)/Number(a):c,className:d("lucide",i),...p},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(n)?n:[n]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:o,...i}=r;return(0,s.createElement)(c,{ref:l,iconNode:t,className:d("lucide-".concat(a(e)),o),...i})});return r.displayName="".concat(e),r}},82715:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14057).A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[992,876,441,517,358],()=>t(63956)),_N_E=e.O()}]);